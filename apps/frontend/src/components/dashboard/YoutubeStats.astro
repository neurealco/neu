---
const { stats } = Astro.props;
const maxValue = Math.max(...stats.daily_data.map(d => d.new_subscribers));
const minValue = Math.min(...stats.daily_data.map(d => d.new_subscribers));
---

<div class="youtube-stats">
  <div class="stats-header">
    <h2>Subscriber Growth</h2>
    <div class="stats-summary">
      <div class="stat-item">
        <span class="stat-value">{stats.subscribers.toLocaleString()}</span>
        <span class="stat-label">Total</span>
      </div>
      <div class="stat-item">
        <span class="stat-value">+{stats.daily_data.reduce((acc, day) => acc + parseInt(day.new_subscribers), 0)}</span>
        <span class="stat-label">Last 7 days</span>
      </div>
    </div>
  </div>

  <div class="chart-container">
    <div class="chart-bars">
      {stats.daily_data.map((data) => {
        const height = ((data.new_subscribers - minValue) / (maxValue - minValue)) * 80;
        return (
          <div
            class="chart-bar"
            style={`height: ${height}%`}
            data-value={data.new_subscribers.toLocaleString()}
          >
            <span class="bar-label">{new Date(data.date).toLocaleDateString('en-US', { weekday: 'short' })}</span>
          </div>
        );
      })}
    </div>
  </div>
</div>

<!-- Mantener estilos existentes -->
