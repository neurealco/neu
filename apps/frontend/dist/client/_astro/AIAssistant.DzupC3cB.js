import{r as u}from"./index.CVf8TyFT.js";var y={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g=u,j=Symbol.for("react.element"),b=Symbol.for("react.fragment"),w=Object.prototype.hasOwnProperty,_=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E={key:!0,ref:!0,__self:!0,__source:!0};function v(i,r,h){var e,a={},s=null,o=null;h!==void 0&&(s=""+h),r.key!==void 0&&(s=""+r.key),r.ref!==void 0&&(o=r.ref);for(e in r)w.call(r,e)&&!E.hasOwnProperty(e)&&(a[e]=r[e]);if(i&&i.defaultProps)for(e in r=i.defaultProps,r)a[e]===void 0&&(a[e]=r[e]);return{$$typeof:j,type:i,key:s,ref:o,props:a,_owner:_.current}}m.Fragment=b;m.jsx=v;m.jsxs=v;y.exports=m;var t=y.exports;function S({aiUsage:i}){const[r,h]=u.useState(!1),[e,a]=u.useState(i),s=u.useRef(null),o=u.useRef(null);u.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[]);const p=(n,l)=>{const c=document.createElement("div");c.classList.add("message",n);const d=document.createElement("div");d.classList.add("avatar"),d.textContent=n==="user"?"👤":"🤖";const f=document.createElement("div");f.classList.add("bubble"),f.innerHTML=l,c.appendChild(d),c.appendChild(f),s.current&&(s.current.appendChild(c),s.current.scrollTop=s.current.scrollHeight)},x=async()=>{const n=o.current?.value.trim();if(!n||e.current>=e.limit||r){e.current>=e.limit&&alert(`You've reached your monthly limit of ${e.limit} AI chats. Upgrade your plan for more.`);return}p("user",n),o.current.value="",h(!0);try{const l=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({message:n})});if(!l.ok)throw new Error("Server response error");const c=await l.json();p("ai",c.response),a(d=>({...d,current:d.current+1}))}catch(l){p("ai",`⚠️ Error: ${l.message}. Please try again.`)}finally{h(!1)}};return t.jsxs("div",{className:"ai-assistant",children:[t.jsxs("div",{className:"chat-header",children:[t.jsx("h1",{children:"AI Assistant"}),t.jsx("p",{children:"Get expert advice for your YouTube channel"}),t.jsxs("div",{className:"credits-display",children:[t.jsx("span",{className:"credits-label",children:"AI Chats this month:"}),t.jsxs("span",{className:"credits-value",children:[e.current,"/",e.limit]})]})]}),t.jsx("div",{ref:s,className:"chat-container",children:t.jsxs("div",{className:"message ai",children:[t.jsx("div",{className:"avatar",children:"🤖"}),t.jsxs("div",{className:"bubble",children:["Hello! I'm your YouTube expert assistant. I can help you with:",t.jsxs("ul",{children:[t.jsx("li",{children:"Subscriber growth strategies"}),t.jsx("li",{children:"Title and description optimization"}),t.jsx("li",{children:"Content trend analysis"}),t.jsx("li",{children:"Engagement improvement ideas"})]}),"Each query counts toward your monthly limit of ",e.limit," chats. How can I help you today?"]})]})}),t.jsxs("div",{className:"input-area",children:[t.jsx("input",{ref:o,type:"text",placeholder:"Type your message...",disabled:e.current>=e.limit||r,onKeyPress:n=>n.key==="Enter"&&x()}),t.jsx("button",{disabled:e.current>=e.limit||r,onClick:x,children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),t.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})}export{S as default};
