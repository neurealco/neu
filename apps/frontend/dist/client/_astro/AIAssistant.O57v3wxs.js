import{r as d}from"./index.CVf8TyFT.js";var j={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y=d,g=Symbol.for("react.element"),b=Symbol.for("react.fragment"),E=Object.prototype.hasOwnProperty,_=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function v(i,s,p){var t,a={},r=null,o=null;p!==void 0&&(r=""+p),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(o=s.ref);for(t in s)E.call(s,t)&&!C.hasOwnProperty(t)&&(a[t]=s[t]);if(i&&i.defaultProps)for(t in s=i.defaultProps,s)a[t]===void 0&&(a[t]=s[t]);return{$$typeof:g,type:i,key:r,ref:o,props:a,_owner:_.current}}m.Fragment=b;m.jsx=v;m.jsxs=v;j.exports=m;var e=j.exports;function w({initialCredits:i}){const[s,p]=d.useState(i),[t,a]=d.useState(!1),r=d.useRef(null),o=d.useRef(null);d.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[]);const h=(n,l)=>{const c=document.createElement("div");c.classList.add("message",n);const u=document.createElement("div");u.classList.add("avatar"),u.textContent=n==="user"?"👤":"🤖";const x=document.createElement("div");x.classList.add("bubble"),x.innerHTML=l,c.appendChild(u),c.appendChild(x),r.current&&(r.current.appendChild(c),r.current.scrollTop=r.current.scrollHeight)},f=async()=>{const n=o.current?.value.trim();if(!(!n||s<100||t)){h("user",n),o.current.value="",a(!0);try{const l=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({message:n})});if(!l.ok)throw new Error("Error en la respuesta del servidor");const c=await l.json();h("ai",c.response),p(u=>u-100)}catch(l){h("ai",`⚠️ Error: ${l.message}. Por favor intenta nuevamente.`)}finally{a(!1)}}};return e.jsxs("div",{className:"ai-assistant",children:[e.jsxs("div",{className:"chat-header",children:[e.jsx("h1",{children:"Asistente de IA"}),e.jsx("p",{children:"Consulta estrategias para mejorar tu canal de YouTube"}),e.jsxs("div",{className:"credits-display",children:[e.jsx("span",{className:"credits-label",children:"Créditos disponibles:"}),e.jsx("span",{className:"credits-value",children:s.toLocaleString()})]})]}),e.jsx("div",{ref:r,className:"chat-container",children:e.jsxs("div",{className:"message ai",children:[e.jsx("div",{className:"avatar",children:"🤖"}),e.jsxs("div",{className:"bubble",children:["¡Hola! Soy tu asistente especializado en YouTube. Puedo ayudarte con:",e.jsxs("ul",{children:[e.jsx("li",{children:"Estrategias para aumentar suscriptores"}),e.jsx("li",{children:"Optimización de títulos y descripciones"}),e.jsx("li",{children:"Análisis de tendencias de contenido"}),e.jsx("li",{children:"Ideas para mejorar el engagement"})]}),"Cada consulta cuesta 100 créditos. ¿En qué puedo ayudarte hoy?"]})]})}),e.jsxs("div",{className:"input-area",children:[e.jsx("input",{ref:o,type:"text",id:"message-input",placeholder:"Escribe tu mensaje...",disabled:s<100||t,onKeyPress:n=>n.key==="Enter"&&f()}),e.jsx("button",{id:"send-button",className:"btn",disabled:s<100||t,onClick:f,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),e.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})}export{w as default};
